function u(e){return!e||typeof e!="string"||!e.startsWith("0x")||e.length!==42?!1:/^0x[0-9a-fA-F]{40}$/.test(e)}function f(e){try{const r=new URL(e).hostname.toLowerCase();return r==="etherscan.io"||r.endsWith(".etherscan.io")?"etherscan":r==="blockscan.com"||r.endsWith(".blockscan.com")?"blockscan":r==="debank.com"?"debank":null}catch{return null}}function h(e){const n=f(e);if(!n)return{address:null,explorer:null,isValid:!1};try{const i=new URL(e).pathname;let s=null;if(n==="etherscan"||n==="blockscan"){const t=i.match(/\/address\/([^\/\?#]+)/);t&&t[1]&&(s=t[1])}else if(n==="debank"){const t=i.match(/\/profile\/([^\/\?#]+)/);t&&t[1]&&(s=t[1])}if(!s)return{address:null,explorer:n,isValid:!1};const d=u(s);return{address:d?s:null,explorer:n,isValid:d}}catch{return{address:null,explorer:n,isValid:!1}}}let l=null,o=null;function a(){const e=h(window.location.href);if(e.isValid&&e.address){if(e.address===l)return;l=e.address,console.log(`Address detected: ${e.address} on ${e.explorer}`)}else l!==null&&(l=null,console.log("No valid Ethereum address found in URL"))}function m(){window.addEventListener("popstate",a),o=window.setInterval(()=>{a()},500)}function p(){window.removeEventListener("popstate",a),o!==null&&(clearInterval(o),o=null)}function c(){a(),m()}window.addEventListener("beforeunload",p);document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();
